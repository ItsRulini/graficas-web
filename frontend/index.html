<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>¡CHAOS!</title>

    <!-- Responsive -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,
    initial-scale=1.0">
    <!-- Diseño .css -->
    <link rel="stylesheet" href="public/styles/MENU.css">
    <link href="https://fonts.cdnfonts.com/css/new-super-mario-font-u" rel="stylesheet">
    <!-- Uso de GSAP para animaciones -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js" integrity="sha512-7eHRwcbYkK4d9g/6tD/mhkf++eoTHwpNM9woBxtPUBWm67zeAfFC+HrdoE2GanKeocly/VxeLvIqwvCdk7qScg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/TextPlugin.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/SplitText.min.js"></script>
    <!-- Fonts Awesome y google para iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
</head>
<body>
    <div class="main">
        <audio id="background-music" style="display: none;" loop>
            <source src="resources/audio/music/Hi-Fi Rush OST The Rush.mp3" type="audio/mpeg">
        </audio>

        <div class="main-aux">
        <!-- PANTALLA -->
        <div class="game-screen">
            <div class="game-menu">
                <!-- DISPLAY RIGHT BAR -->
                <button class="gm-btn-display"><i class="fa-solid fa-bars"></i></button>
                <!-- BARRA DERECHA -->
                <div class="game-display" id="gd-player">
                    <div class="gd-cw"></div>
                    <img src="resources/img/paw.png" alt="paw" id="paw">
                    <div class="gd-aux">
                        <div class="gd-info">
                            <div class="gd-circle"></div>
                            <div class="gdd-img"> 
                                <div class="gd-user"><!-- dropdown s-->
                                    <img src="resources/img/border.png" alt="border" id="border">
                                    <img src="resources/img/default.jpg" alt="avatar" id="avatar">
                                    <div class="gdu-select"> <!-- dropdown content-->
                                        <img src="resources/img/ness.png" alt="player" id="ness">
                                        <img src="resources/img/yoshi.png" alt="player" id="yoshi">
                                        <img src="resources/img/bomberman.png" alt="player" id="bomberman">
                                        <img src="resources/img/isabelle.png" alt="player" id="isabelle">
                                    </div>
                                </div>
                                <div class="barcode">
                                    <i class="fa-solid fa-barcode"></i>
                                    <i class="fa-solid fa-barcode"></i>
                                    <i class="fa-solid fa-barcode"></i>
                                    <i class="fa-solid fa-barcode"></i>
                                    <i class="fa-solid fa-barcode"></i>
                                </div>
                                <p id="playercard">PLAYER CARD</p>
                            </div>
                            <div class="gdd-input">
                                <span id="idspan">ID: 200300</span>
                                <div class="gi player">
                                    <span><i class="fa-solid fa-star"></i></span>
                                    <span>PLAYER SINCE:</span>
                                    <span>9/23/25</span>
                                </div>
                                <div class="gi name">
                                    <span>NAME:</span>
                                    <span>Username</span>
                                </div>
                                <div class="gi-aux">
                                    <div class="gi">
                                        <span>BEST SCORE:</span>
                                        <span>9999</span>
                                    </div>
                                    <div class="gi">
                                        <span><i class="fa-regular fa-clock"></i>:</span>
                                        <span>03:19</span>
                                    </div>
                                </div>
                                <div class="gi-aux">
                                    <div class="gi">
                                        <span>TOTAL WINS:</span>
                                        <span>9999</span>
                                    </div>
                                    <div class="gi">
                                        <span><i class="fa-solid fa-skull"></i>:</span>
                                        <span>9999</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- MENU PRINCIPAL -->
                <div class="gm-opt">
                    <div class="gm-img">
                        <img src="resources/img/logo.png" alt="logo">
                    </div>
                    <div class="gmo-start-wrapper" id="gmo-start">
                        <div class="gmo-start">
                            <img src="resources/img/stargreen.png" alt="star" class="gmo-i uno">
                            <span>START</span>
                        </div>
                    </div>
                    <div class="gmo-config-wrapper" id="open-gmc">
                        <div class="gmo-config">
                            <!-- <span><i class="fa-solid fa-gear"></i></span> -->
                            <span>SETTINGS</span>
                        </div>
                    </div>
                    <div class="gmo-credits-wrapper" id="open-gmct">
                        <div class="gmo-credits">
                            <!-- <span><i class="fa-regular fa-note-sticky"></i></span> -->
                            <span>CREDITS</span>
                        </div>
                    </div>
                    <div class="gmo-exit-wrapper" id="gmo-exit">
                        <div class="gmo-exit">
                            <span class="gmo-i dos"><i class="fa-solid fa-right-from-bracket"></i></span>
                            <span class="gmo-i tres"><i class="fa-solid fa-right-from-bracket"></i></span>
                            <span>EXIT</span>
                        </div>
                    </div>
                </div>
                <!-- START MENU -->
                <div class="gm-start" style="display: none;" id="start-start">
                    <div class="gms-aux">
                        <div class="gms-stf"></div>
                        <div class="gms-stp"></div>
                        <div class="gms-st">
                            <div class="gms-st-aux" id="play-options">
                                    <div class="gms-imgs">
                                    <img src="resources/img/star.png" alt="star" id="star-g">
                                    <img src="resources/img/star.png" alt="star" id="star-gd">
                                    <img src="resources/img/9.png" alt="nueve" id="nueve-g">
                                    <img src="resources/img/8.png" alt="ocho" id="ocho-g">
                                    <img src="resources/img/11.png" alt="once" id="once-g">
                                </div>
                                <div class="gms-back sfx-btn-close">
                                    <div class="gms-x" id="close-gms"><i class="fa-solid fa-arrow-left"></i></div>
                                </div>
                                <div class="gms-title">
                                    <p>Let the chaos</p>
                                    <img src="resources/img/begin.png" alt="begin">
                                </div>
                                <!-- CREATE or JOIN LOBBY -->
                                <div class="gms-wrap">
                                    <div class="gms-create sfx-btn" id="create-lob"> <!-- crear sala -->
                                        <div class="gmsc-bg uno" id="host">
                                            <i class="fa-solid fa-plus" id="i-plus"></i>
                                            <div class="create-i">
                                                <div class="ci uno"><i class="fa-regular fa-flag"></i></div>
                                            </div>
                                            <div class="create-icons">
                                                <span><i class="fa-solid fa-user-plus"></i></span>
                                            </div>
                                            <div class="create-wrapper">
                                            </div>
                                            <div class="create-g uno">
                                                <p>Host Lobby</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="gms-join sfx-btn" id="join-lob"> <!-- join sala -->
                                        <div class="gmsc-bg dos">
                                            <img src="resources/img/gamepad.png" alt="gamepad" id="imggp">
                                            <div class="create-i">
                                                <div class="ci dos"><i class="fa-solid fa-wifi"></i></div>
                                            </div>
                                            <div class="create-icons">
                                                <span><i class="fa-solid fa-user"></i></span>
                                                <span><i class="fa-solid fa-user"></i></span>
                                                <span><i class="fa-solid fa-user"></i></span>
                                                <span><i class="fa-solid fa-user"></i></span>
                                            </div>
                                            <div class="create-wrapper">
                                            </div>
                                            <div class="create-g dos">
                                                <p>#Join Lobby</p>
                                            </div>
                                            
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- OPTIONS to CREATE a lobby -->
                            <div class="gmsc-lobby" id="hlobby" style="display: none;">
                                <div class="gml-back sfx-btn-close">
                                    <div class="gml-x" id="close-gml"><i class="fa-solid fa-arrow-left"></i></div>
                                </div>
                                <div class="lobby-aux">
                                    <img src="resources/img/stargreen.png" alt="star" class="star uno">
                                    <img src="resources/img/stargreen.png" alt="star" class="star dos">
                                    <img src="resources/img/stargreen.png" alt="star" class="star tres">
                                    <img src="resources/img/10.png" alt="starscitas" class="star cuatro">
                                    <div class="lobby-choose-aux">
                                        <div class="lobby-choose">
                                            <div class="pn sfx-btn-click" id="lc-prev"><i class="fa-solid fa-caret-left"></i></div>
                                            <div class="lc-level uno">
                                                <img src="resources/img/bg.jpg" alt="bg" class="bg">
                                                <div class="lcl-name-wrapper">
                                                    <div class="lcl-name">
                                                        <i class="fa-solid fa-crown"></i>
                                                    </div>
                                                </div>
                                                <div class="lcl-bottom"></div>
                                            </div>
                                            <div class="lc-level dos">
                                                <img src="resources/img/bg.jpg" alt="bg" class="bg">
                                                <div class="lcl-name-wrapper">
                                                    <div class="lcl-name">
                                                        <i class="fa-solid fa-crown"></i>
                                                    </div>
                                                </div>
                                                <div class="lcl-bottom"></div>
                                            </div>
                                            <div class="lc-level tres">
                                                <img src="resources/img/bg.jpg" alt="bg" class="bg">
                                                <div class="lcl-name-wrapper">
                                                    <div class="lcl-name">
                                                        <i class="fa-solid fa-crown"></i>
                                                    </div>
                                                </div>
                                                <div class="lcl-bottom"></div>
                                            </div>
                                            <div class="pn sfx-btn-click" id="lc-next"><i class="fa-solid fa-caret-right"></i></div>
                                        </div>
                                        <div class="gmc-gamemode" id="level-dif">
                                                <div class="arrow sfx-btn-click" id="ld-prev"><i class="fa-solid fa-caret-left"></i></div>
                                                <div class="gmc-display" id="ld-display">EASY</div>
                                                <div class="arrow sfx-btn-click" id="ld-next"><i class="fa-solid fa-caret-right"></i></div>
                                            </div>
                                    </div>
                                    <div class="lobby-config">
                                        <img src="resources/img/8.png" alt="cinta" class="cintita uno">
                                        <div class="lcc-aux">
                                            <p id="level-name">Level Name</p>
                                            <div class="level-d">
                                                <span><i class="fa-solid fa-circle-exclamation"></i></span>
                                                <span id="level-desc">Lorem ipsum dolor sit amet consectetur</span>
                                            </div>
                                        </div>
                                        <div class="lc-aux">
                                            <div class="lc-code">
                                                <div class="lc-code-top uno"></div>
                                                <img src="resources/img/8.png" alt="cinta" class="cintita dos">
                                                <p>#Room Code:</p>
                                                <input type="text" value="#RYOFG">
                                            </div>
                                            <div class="lc-code">
                                                <div class="lc-code-top dos"></div>
                                                <img src="resources/img/8.png" alt="cinta" class="cintita tres">
                                                <p>Start!</p>
                                                <div class="lcp-wrapper sfx-btn" id="pGame">
                                                    <div class="lcp">
                                                        <i class="fa-solid fa-play"></i>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- JOING LOBBY -->
                            <div class="gmcj-lobby" id="jlobby" style="display: none;">
                                <div class="gmcj-back sfx-btn-close">
                                    <div class="gmcj-x" id="close-gmcj"><i class="fa-solid fa-arrow-left"></i></div>
                                </div>
                                <img src="resources/img/8.png" alt="cinta" class="tape uno">
                                <img src="resources/img/8.png" alt="cinta" class="tape dos">
                                <img src="resources/img/star.png" alt="star" class="estrellita uno">
                                <img src="resources/img/star.png" alt="star" class="estrellita dos">
                                <img src="resources/img/4.png" alt="sun" class="suns" >
                                <img src="resources/img/stardot.png" alt="stardot" class="stardot"> 
                                <!-- Active players -->
                                <div class="lobby-players">
                                    <div class="lp-ig">
                                            <img src="resources/img/ig.png" alt="IG">
                                        </div>
                                        <div class="lp-aux-show">
                                            <!-- Player in game -->
                                            <div class="lp-display">
                                                <img src="resources/img/pfp.jpg" alt="pfp" id="lp-avatar">
                                                <div class="lp-aux">
                                                    <div class="lp-names">
                                                        <p id="lpn-user">Username</p>
                                                        <p class="lpn-rank">Host</p>
                                                    </div>
                                                    <div class="lp-rank-aux">
                                                        <p class="rank">RANK</p>
                                                        <div class="lp-rank">
                                                            <div class="lpr">
                                                                <i class="fa-solid fa-crown"></i>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- Player to join the lobby -->
                                            <div class="lp-display-tj">
                                                <img src="resources/img/question-mark.png" alt="pfp" id="lp-avatar-tj">
                                                <div class="lp-aux-tj">
                                                    <div class="lp-names-tj">
                                                        <p id="lpn-user-tj">???</p>
                                                        <p class="lpn-rank">???</p>
                                                    </div>
                                                    <div class="lp-rank-aux-tj">
                                                        <p class="rank">RANK</p>
                                                        <div class="lp-rank-tj">
                                                            <div class="lpr-tj">
                                                                <i class="fa-solid fa-question"></i>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- Player to join the lobby -->
                                            <div class="lp-display-tj">
                                                <img src="resources/img/question-mark.png" alt="pfp" id="lp-avatar-tj">
                                                <div class="lp-aux-tj">
                                                    <div class="lp-names-tj">
                                                        <p id="lpn-user-tj">???</p>
                                                        <p class="lpn-rank">???</p>
                                                    </div>
                                                    <div class="lp-rank-aux-tj">
                                                        <p class="rank">RANK</p>
                                                        <div class="lp-rank-tj">
                                                            <div class="lpr-tj">
                                                                <i class="fa-solid fa-question"></i>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- Player to join the lobby -->
                                            <div class="lp-display-tj">
                                                <img src="resources/img/question-mark.png" alt="pfp" id="lp-avatar-tj">
                                                <div class="lp-aux-tj">
                                                    <div class="lp-names-tj">
                                                        <p id="lpn-user-tj">???</p>
                                                        <p class="lpn-rank">???</p>
                                                    </div>
                                                    <div class="lp-rank-aux-tj">
                                                        <p class="rank">RANK</p>
                                                        <div class="lp-rank-tj">
                                                            <div class="lpr-tj">
                                                                <i class="fa-solid fa-question"></i>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                </div>
                                <!-- Search lobby -->
                                <div class="lobby-join">
                                    <div class="lj-je">
                                        <div class="lj-je-top uno"></div>
                                        <p>Enter code:</p>
                                        <div class="lj-search">
                                            <input type="text" placeholder="#RYOFG">
                                            <button><i class="fa-solid fa-magnifying-glass"></i></button>
                                        </div>
                                    </div>
                                    <div class="lj-je">
                                        <div class="lj-je-top dos"></div>
                                        <p>Join!</p>
                                        <div class="lj-wrapper sfx-btn">
                                            <div class="ljw">
                                                <i class="fa-solid fa-right-to-bracket"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- SELECT player -->
                        </div>
                    </div>
                </div>
                <!-- SETTINGS & PAUSE MENU -->
                <div class="gm-config" style="display: none;" id="config-pause"> <!--fondo -->
                    <div class="gmc-set">
                        <div class="gmc-close sfx-btn-close" id="close-gmc"> <!--cambia aspecto si es pausa -->
                            <div class="gmc-x">x</div>
                        </div>
                        <div class="gmc-resume sfx-btn-close" style="display: none;" id="resume-gmc">
                            <div class="gmc-play"><i class="fa-solid fa-play"></i></div>
                        </div>
                        <div class="gmc-img">
                            <img src="resources/img/9.png" alt="spiral" id="spiral">
                            <img src="resources/img/10.png" alt="stars" id="stars">
                            <!-- <img src="resources/img/7.png" alt="powow" id="powow"> -->
                            <img src="resources/img/8.png" alt="cinta" id="cinta">
                            <img src="resources/img/8.png" alt="cinta" id="cintados">
                        </div>
                        <div class="gmc-left">
                            <div class="gmc-page uno">
                            </div>
                            <div class="gmc-page dos">
                            </div>
                            <div class="gmc-page tres">
                            </div>
                            <div class="gmc-page cuatro">
                            </div>
                            <div class="gmc-page cinco">
                            </div>
                        </div>
                        <div class="gmc-set-aux">
                            <div class="gmc-set-h">
                                <img src="resources/img/settings.png" alt="settings">
                            </div>
                            <div class="gmc-music-sound">
                                <button id="music-btn" class="sfx-btn"><i class="material-symbols-outlined">music_note</i></button>
                                <button id="volume-btn" class="sfx-btn"><i class="fa-solid fa-volume-high"></i></button>
                            </div>
                            <div class="gmc-gamemode" id="gamemode-gmc">
                                <div class="arrow sfx-btn-click" id="prev"><i class="fa-solid fa-caret-left"></i></div>
                                <div class="gmc-display" id="gm-dif">EASY</div>
                                <div class="arrow sfx-btn-click" id="next"><i class="fa-solid fa-caret-right"></i></div>
                            </div>
                            <div class="gmc-reload-wrapper sfx-btn" style="display: none;" id="reload-gmc"> <!-- se muestra solo en el menu de pausa -->
                                <div class="gmc-reload">
                                    <i class="fa-solid fa-rotate-right"></i>
                                </div>
                            </div>
                            <div class="gmc-btns">
                                <div class="gmc-save-wrapper" id="save-gmc">
                                    <div class="gmc-save sfx-normal-btn">
                                        <!-- <span class="save uno"><i class="fa-solid fa-floppy-disk"></i></span>
                                        <span class="save dos"><i class="fa-solid fa-floppy-disk"></i></span> -->
                                        <span>SAVE</span>
                                    </div>
                                </div>
                                <a class="gmc-quit-wrapper" style="display: none;" id="quit-gmc" href="LOG.HTML">
                                    <div class="gmc-quit sfx-normal-btn">
                                        <!-- <i class="fa-solid fa-arrow-right-from-bracket"></i> -->
                                         <span>EXIT</span>
                                    </div>
                                </a>
                            </div>
                       </div>
                    </div>
                </div>
                <!-- CREDITS -->
                <div class="gm-credits" style="display: none;">
                    <div class="gmct-cdts">
                        <div class="gmct-close sfx-btn-close">
                            <div class="gmct-x" id="close-gmct">x</div>
                        </div>
                        <div class="gmc-img">
                            <img src="resources/img/8.png" alt="cinta" id="cinta">
                            <img src="resources/img/8.png" alt="cinta" id="cintados">
                        </div>
                        <div class="gmc-left">
                            <div class="gmc-page uno">
                            </div>
                            <div class="gmc-page dos">
                            </div>
                            <div class="gmc-page tres">
                            </div>
                            <div class="gmc-page cuatro">
                            </div>
                            <div class="gmc-page cinco">
                            </div>
                        </div>
                        <div class="gmct-set-aux">
                            <div class="gmct-set-h">
                                <img src="resources/img/credits.png" alt="credits">
                            </div>
                            <div class="gmct-names" aria-hidden="true">
                                <p id="raul">Raul Alejandro <br> Garcia Gamez</p>
                                <p id="alberto">Alberto Jesus <br> Alvarado Garza</p>
                                <p id="danna">Danna Paola <br> Hernandez Rodriguez</p>
                            </div>
                        </div>
                        
                    </div>
                </div>
            </div>
        </div>
        
        </div>
    </div>
    <!-- SCRIPTS.js -->
    <!-- Script de prueba de conexión API -->
    <script type="module"> 
        import api from './public/js/api.js';

        // Probar conexión al cargar la página
        window.addEventListener('DOMContentLoaded', async () => {
            console.log('🧪 Probando conexión con el backend...');
            
            try {
                // Test 1: Health check
                const health = await api.healthCheck();
                console.log('✅ Health Check:', health);

                // Test 2: Test endpoint
                const test = await api.testConnection();
                console.log('✅ Test Connection:', test);

                // Test 3: Database status
                const db = await api.checkDatabase();
                console.log('✅ Database Status:', db);

                console.log('🎉 ¡Todas las conexiones funcionan correctamente!');
            } catch (error) {
                console.error('❌ Error conectando con el backend:', error);
            }
        });
    </script>
    <script src="public/js/MENU.js" type="module"></script>
    <!--AGREGADO PARA MULTI-->
    <script>
document.addEventListener('DOMContentLoaded', () => {
    const playButton = document.getElementById('pGame');
    const nicknameInput = document.querySelector('.lc-code input[type="text"]');
    
    if (playButton) {
        playButton.addEventListener('click', () => {
            const nickname = nicknameInput.value.trim();
            
            // Validar nickname
            if (!nickname || nickname === '#RYOFG') {
                alert('⚠️ Please enter your nickname!');
                return;
            }
            
            // Verificar que el personaje esté seleccionado
            const selectedCharacter = localStorage.getItem('PlayerName');
            if (!selectedCharacter) {
                alert('⚠️ Please select a character first!');
                return;
            }
            
            // Guardar SOLO el nickname
            localStorage.setItem('PlayerNickname', nickname);
            
            console.log(`✅ Nickname: ${nickname}`);
            console.log(`✅ Character: ${selectedCharacter}`);
            
            // Redirigir al juego
            window.location.href = '/SCENE.html';
        });
    }
});
    </script>
</body>
